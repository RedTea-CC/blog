---
title: 包含块
date: 2025-04-09-10:47
tags:
  - CSS
---

# 包含块
## 概念

包含块是当前元素的“参考矩形”，元素的尺寸（如`width: 50%`）和定位（如`position: absolute`）均基于包含块的边界计算。  
## 确定包含块

1. **基本概念**  
   包含块是当前元素的“参考矩形”，元素的尺寸（如`width: 50%`）和定位（如`position: absolute`）均基于包含块的边界计算。  
   - **根元素**（如`<html>`）的包含块是初始包含块（viewport的尺寸）。  
   - **普通元素**的包含块通常是最近的**祖先块级元素的内容区**（content area）。

2. **定位元素的包含块**  
   包含块的形成与祖先元素的`position`属性密切相关：  
   - **`position: static`或无定位**：包含块是最近的<font color=#a8c373>块级</font>祖先的内容区。  
   - **`position: relative`**：包含块是最近的<font color=#a8c373>块级</font>祖先的内容区。    
   - **粘性定位元素（`position: sticky`）**：包含块通常是最近的滚动祖先元素。
   
   - **绝对定位元素（`position: absolute`）**：其包含块是离它最近的已定位祖先元素（非`static`）的<font color=#F36208>内边距区的边缘组成</font>。如果没有这样的祖先元素，那么包含块就是初始包含块。
   - **固定定位元素（`position: fixed`）**：包含块是**视口**（viewport）。
   
   - **特殊场景**：若祖先有`transform: translate()`等属性，会创建新的包含块。

---

## **面试常见问题**

1. **基础概念题**  
   - **问题**：什么是包含块？如何确定一个元素的包含块？  
   - **回答**：需分情况讨论`position`属性的影响，例如绝对定位元素的包含块是最近的定位祖先的内边距区。

2. **场景分析题**  
   - **问题**：若元素A的父级无定位，但祖父级有`position: relative`，A的`absolute`定位参考谁？  
   - **回答**：参考祖父级元素，因其是最近的定位祖先。

3. **细节辨析题**  
   - **问题**：包含块是否包括祖先的边框或外边距？  
   - **回答**：不包括。普通元素的包含块是祖先的**内容区**，绝对定位元素的包含块是定位祖先的**内边距区**（不含边框和外边距）。

4. **关联概念题**  
   - **问题**：包含块与BFC（块级格式化上下文）的关系？  
   - **回答**：BFC的边界由包含块决定，例如浮动元素的包含块可能影响BFC的创建。

---

## **注意事项**

- **百分比尺寸的陷阱**：若父元素无明确尺寸（如`width: auto`），子元素的百分比值可能无法正确计算。  
- **嵌套定位**：多层定位元素需逐级检查包含块，避免布局错位。
- **绝对定位元素填充可用空间**：和其包含块有内边距有关

![[1-前端/CSS/基础/基础#绝对定位元素填充可用空间|绝对定位元素填充可用空间]]
## 根据包含块计算百分值

如上所述，当某些属性被赋予一个百分比值时，它的计算值取决于这个元素的包含块。以这种方式工作的属性包括**盒模型属性**和**偏移属性**：

1. `height`及 `bottom`属性根据包含块的 `height` 计算百分比值。
2. `width`、`left`、`right`、`padding`和 `margin`属性根据包含块的 `width` 计算百分比值。

> **备注：** 一个**块容器**（比如 inline-block、block 或 list-item 元素）要么只包含参与行级格式化上下文的行级盒子，要么只包含参与块级格式化上下文的块级盒子。只有包含块级或行级盒子的元素才是块容器。

